const b='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M14,10H2v2h12V10z M14,6H2v2h12V6z M2,16h8v-2H2V16z M21.5,11.5L23,13l-6.99,7l-4.51-4.5L13,14l3.01,3L21.5,11.5z"/></svg>';const e={menuButton:"ylcs-menu-button",activeMenuButton:"ylcs-active-menu-button",guestHidden:"ylcs-guest-hidden",memberHidden:"ylcs-member-hidden",moderatorHidden:"ylcs-moderator-hidden",ownerHidden:"ylcs-owner-hidden",superChatHidden:"ylcs-superchat-hidden",superStickerHidden:"ylcs-supersticker-hidden",membershipHidden:"ylcs-membership-hidden"};let n,d;const y=()=>{const t=document.querySelector(`.${e.menuButton}`);t&&(n?t.classList.add(e.activeMenuButton):t.classList.remove(e.activeMenuButton))},p=()=>{var l,m;const t=document.querySelector("#chat-messages > yt-live-chat-header-renderer"),a=t&&t.querySelector("yt-live-chat-button");if(!t||!a)return;const o=document.createElement("yt-icon");o.classList.add("style-scope","yt-button-renderer");const c=document.createElement("button");c.id="button",c.classList.add("style-scope","yt-icon-button");const s=document.createElement("yt-icon-button");s.id="button",s.classList.add("style-scope","yt-button-renderer");const r=document.createElement("a");r.tabIndex=-1,r.classList.add("yt-simple-endpoint","style-scope","yt-button-renderer");const i=document.createElement("yt-live-chat-button");i.id="live-chat-header-context-menu",i.classList.add(e.menuButton,"style-scope","yt-live-chat-header-renderer"),s.title="Select Messages",s.onclick=async()=>{await chrome.runtime.sendMessage({type:"menu-button-clicked"})},t.insertBefore(i,a),i.append(r),r.append(s),s.append(c),c.append(o),o.innerHTML=b,(l=i.querySelector("yt-button-renderer"))==null||l.remove(),(m=s.querySelector("button"))==null||m.remove(),y()},u=()=>{n&&!d.types.guest?document.body.classList.add(e.guestHidden):document.body.classList.remove(e.guestHidden),n&&!d.types.member?document.body.classList.add(e.memberHidden):document.body.classList.remove(e.memberHidden),n&&!d.types.moderator?document.body.classList.add(e.moderatorHidden):document.body.classList.remove(e.moderatorHidden),n&&!d.types.owner?document.body.classList.add(e.ownerHidden):document.body.classList.remove(e.ownerHidden),n&&!d.types["super-chat"]?document.body.classList.add(e.superChatHidden):document.body.classList.remove(e.superChatHidden),n&&!d.types["super-sticker"]?document.body.classList.add(e.superStickerHidden):document.body.classList.remove(e.superStickerHidden),n&&!d.types.membership?document.body.classList.add(e.membershipHidden):document.body.classList.remove(e.membershipHidden)};chrome.runtime.onMessage.addListener((t,a,o)=>{const{type:c,data:s}=t;switch(c){case"enabled-changed":return n=s.enabled,y(),u(),o();case"settings-changed":return d=s.settings,u(),o()}});chrome.runtime.sendMessage({type:"content-loaded"}).then(t=>{n=t.enabled,d=t.settings,p(),u()});
