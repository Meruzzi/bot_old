import{p as u,i as g}from"./index-22993d8e.js";const h="/icon.png",l="/icon-on.png";let c=!0,a={};const y=async()=>{try{const t=`persist:${u.key}`,e=(await chrome.storage.local.get(t))[t],n=JSON.parse(e);return JSON.parse(n.settings)}catch{return g}},i=async(t,e)=>{const n=e?l:h;await chrome.action.setIcon({tabId:t,path:n})},m=async t=>{const e=a[t]??c;a={...a,[t]:e},await i(t,e);const n=await y();return{enabled:e,settings:n}},p=async t=>{let e=a[t]??c;e=!e,c=e,a={...a,[t]:e},await i(t,e),await chrome.tabs.sendMessage(t,{type:"enabled-changed",data:{enabled:e}})},w=async t=>{const e=await chrome.tabs.query({url:"https://www.youtube.com/*"});for(const n of e)try{n.id&&chrome.tabs.sendMessage(n.id,{type:"settings-changed",data:{settings:t}})}catch{}};chrome.runtime.onMessage.addListener((t,e,n)=>{const{type:o,data:r}=t,{tab:s}=e;switch(o){case"content-loaded":return s!=null&&s.id?(m(s.id).then(d=>n(d)),!0):void 0;case"menu-button-clicked":return s!=null&&s.id?(p(s.id).then(()=>n()),!0):void 0;case"settings-changed":return w(r.settings).then(()=>n()),!0}});
